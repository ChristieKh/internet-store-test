import React, {Component} from "react";
import {connect} from "react-redux";
import {fetchCategory} from "actions";
import {getCategories} from "selectors";
import {Link} from "react-router";

class Categories extends Component {

    componentDidMount() {
        this.props.fetchCategory()
    }

    renderCategory(category, index) {
        return (
            <div className="col-sm-4 col-lg-4 col-md-4 book-list" key={index}>
                <div className="caption">
                    <Link to={`/items/${category.id}`}>
                        <h4 className="pull-right">{category.title}</h4>
                    </Link>
                </div>
            </div>
        )
    }

    render() {
        const {categories} = this.props;
        return (
            <div>
                {/*<span className="navbar-brand mb-0 h1">Категории товаров</span>*/}
                <div className="books row">
                    {categories.map((category, index) => this.renderCategory(category, index))}
                </div>
            </div>
        )
    }
}

const MapStateToProps = state => ({
    categories: getCategories(state)
});

const MapDispatchToProps = {
    fetchCategory
};

export default connect(MapStateToProps, MapDispatchToProps)(Categories);
